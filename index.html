<!DOCTYPE html>
<html lang="zh-Hant">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>動植物檢疫守門員</title>
    <link rel="stylesheet" href="./css/index.css">
    <link rel="shortcut icon" href="./images/icon.png" type="image/x-icon">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lottie-web/5.9.2/lottie.min.js"
        integrity="sha512-R47oG09eydaf225nXyDdSWJ8frKwxkC7QIHXdPpbUx9KaAiC6akjpWxTBw1hb7whk7P2sJNuRhS2ljSBegnIPA=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter&family=Noto+Sans+TC:wght@500;700;900&display=swap"
        rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.6.0.js"></script>
    <script src="https://code.jquery.com/ui/1.13.1/jquery-ui.js"></script>
    <link rel="preload" as="image" href="./images/bg.png">
    <link rel="preload" as="image" href="./images/dialogbox_1.png">
    <link rel="preload" as="image" href="./images/game_start.png">
    <link rel="preload" as="image" href="./images/startbtn.png">
    <link rel="preload" as="image" href="./images/startbtn_hover.png">
    <link rel="preload" as="image" href="./images/game_first.png">
    <link rel="preload" as="image" href="./images/game_second.png">
    <link rel="preload" as="image" href="./images/game_third.png">
    <link rel="preload" as="image" href="./images/form.png">
    <link rel="preload" as="image" href="./images/dialogbox_3.png">
    <link rel="preload" as="image" href="./images/dialogbox_4.png">
    <script>
        window.addEventListener('load', function () {
            document.getElementById('body').style.display = 'block';
        });
    </script>
</head>

<body id="body">
    <header>
        <div class="header_logo">
            <a class="header_a" href="./index.html">
                <img src="./images/logo_1.png" alt="">
            </a>
            <label for="nav-toggle" class="ham">
                <div class="ham-origin">
                    <div class="ham-bar ham-bar--top"></div>
                    <div class="ham-bar ham-bar--middle"></div>
                    <div class="ham-bar ham-bar--bottom"></div>
                </div>
            </label>
        </div>
        <input id="nav-toggle" type="checkbox">
        <div class="header_link_all">
            <div class="header_link header_link_now_page" id="header_home">
                <div class="header_link_title">首頁</div>
                <div class="header_link_line"></div>
            </div>
            <a class="header_link" id="header_act" href="./activity.html">
                <div class="header_link_title">活動辦法</div>
                <div class="header_link_line"></div>
            </a>
            <a class="header_link" id="header_lott" href="./lottery.html">
                <div class="header_link_title">抽獎公布</div>
                <div class="header_link_line"></div>
            </a>
        </div>
    </header>
    <main>
        <div class="main_container">
            <div class="count" id="count">
                <div class="count_num_all">
                    <div class="count_num" id="count_num">10</div>&ensp;
                    <div class="count_num">sec</div>
                </div>
            </div>
            <div class="score" id="score">
                <div class="score_num" id="score_num">000</div>
            </div>
            <div id="game_start">
                <div id="startbtn" class="img_100">
                    <img src="./images/startbtn_hover.png" alt="start btn_hover">
                    <img src="./images/startbtn.png" alt="start btn">
                </div>
                <div id="game_start_dialogbox">
                    <div id="game_start_txt">一起加入，成為動植物檢疫的守門員吧！<br>
                        通過三個關卡，即可抽Line Points以及精美獎品唷！
                    </div>
                </div>
            </div>
            <div id="game_round1">
                <div id="game1_start"></div>
                <div id="game1_end"></div>
                <div id="game2_start"></div>
                <div id="game2_end"></div>
                <div id="pack_all">
                    <div class="img_100" id="box_1_1"><img src="./images/box_1_1.png" alt="box_1_1"></div>
                    <div class="img_100" id="box_1_2"><img src="./images/box_1_2.png" alt="box_1_2"></div>
                    <div class="img_100" id="box_1_3"><img src="./images/box_1_3.png" alt="box_1_3"></div>
                </div>
                <div id="pack_all_02">
                    <div class="img_100" id="box_2_1"><img src="./images/box_2_1.png" alt="box_2_1"></div>
                    <div class="img_100" id="box_2_2"><img src="./images/box_2_2.png" alt="box_2_2"></div>
                    <div class="img_100" id="box_2_3"><img src="./images/box_2_3.png" alt="box_2_3"></div>
                </div>
                <div class="img_100" id="dog01"><img src="./images/dog.png" alt="dog"></div>
                <div class="img_100" id="dog02"><img src="./images/dog_2.png" alt="dog2"></div>
                <div class="img_100" id="dog03"><img src="./images/dog_2.png" alt="dog3"></div>
                <div class="img_100" id="left_ip"><img src="./images/people.png" alt="people"></div>
                <div class="game_round_dialogbox" id="round01_dialogbox">
                    <div class="game_round_dialogbox_all">
                        <div class="game_round_title">協助檢疫犬發現可疑包裹！</div>
                        <div class="game_round_txt">
                            防檢局的護國神犬們，會在包裹輸送帶上嗅聞檢查，<span>請幫忙點擊該包裹，將包裹挑出來</span>，讓我們進一步檢查！<span>找到可疑包裹加5分！</span></div>
                        <div class="game_round_start_btn" id="round01_start_btn">開始遊戲</div>
                    </div>
                </div>
                <div class="add_5 img_100" id="add_01"><img src="./images/plus_five.png" alt="plus_five"></div>
                <div class="add_5 img_100" id="add_02"><img src="./images/plus_five.png" alt="plus_five"></div>
                <div class="success_circle img_100" id="success01"><img src="./images/correct_icon.png"
                        alt="correct_icon"></div>
                <div class="mistake img_100" id="mistake_left01"><img src="./images/wrong_icon.png" alt="wrong_icon">
                </div>
                <div class="mistake img_100" id="mistake_right01"><img src="./images/wrong_icon.png" alt="wrong_icon">
                </div>
                <div class="success_circle img_100" id="success02"><img src="./images/correct_icon.png"
                        alt="correct_icon"></div>
                <div class="mistake img_100" id="mistake_left02"><img src="./images/wrong_icon.png" alt="wrong_icon">
                </div>
                <div class="mistake img_100" id="mistake_right02"><img src="./images/wrong_icon.png" alt="wrong_icon">
                </div>
            </div>
            <div id="game_round2" class="fade_in">
                <div class="img_100" id="left_ip_2"><img src="./images/people_dog_1.png" alt="people_dog_1"></div>
                <div id="round2_q1">
                    <div class="img_100" id="round2_q1_box"><img src="./images/second_box_1.png" alt="second_box_1">
                    </div>
                    <div class="img_100 round2_wrong" id="round2_q1_facemask"><img src="./images/facemask.png"
                            alt="face mask"></div>
                    <div class="img_100 round2_wrong" id="round2_q1_potatochips"><img src="./images/potatochips.png"
                            alt="potato chips"></div>
                    <div class="img_100 round2_wrong" id="round2_q1_chocolate"><img src="./images/chocolate.png"
                            alt="chocolate"></div>
                    <div class="img_100 round2_answer" id="round2_q1_dogfood"><img src="./images/dogfood.png"
                            alt="dog food"></div>
                    <div class="img_100 round2_answer" id="round2_q1_wood"><img src="./images/wood.png" alt="wood">
                    </div>
                </div>
                <div id="round2_q2" class="fade_in_round2">
                    <div class="img_100" id="round2_q2_box"><img src="./images/second_box_2.png" alt="second_box_2">
                    </div>
                    <div class="img_100 round2_wrong" id="round2_q2_coffee"><img src="./images/coffee.png" alt="coffee">
                    </div>
                    <div class="img_100 round2_answer" id="round2_q2_sausage"><img src="./images/sausage.png"
                            alt="sausage"></div>
                    <div class="img_100 round2_answer" id="round2_q2_egg"><img src="./images/egg.png" alt="egg"></div>
                    <div class="img_100 round2_answer" id="round2_q2_noodle"><img src="./images/noodle.png"
                            alt="noodle">
                    </div>
                </div>
                <div id="round2_q3" class="fade_in_round2">
                    <div class="img_100" id="round2_q3_box"><img src="./images/second_box_1.png" alt="second_box_1">
                    </div>
                    <div class="img_100 round2_answer" id="round2_q3_vegetable"><img src="./images/vegetable.png"
                            alt="vegetable">
                    </div>
                    <div class="img_100 round2_answer" id="round2_q3_peanut"><img src="./images/peanut.png"
                            alt="peanut"></div>
                    <div class="img_100 round2_answer" id="round2_q3_plant"><img src="./images/plant.png" alt="plant">
                    </div>
                    <div class="img_100 round2_wrong" id="round2_q3_detergent"><img src="./images/detergent.png"
                            alt="detergent">
                    </div>
                </div>
                <div class="game_round_dialogbox" id="round02_dialogbox">
                    <div class="game_round_dialogbox_all">
                        <div class="game_round_title">協助檢疫員搜查違禁動植物產品！</div>
                        <div class="game_round_txt">
                            可疑的包裹被檢疫犬找出後，要請你(妳)幫忙檢疫員，找出不應輸入的動植物產品，一起守護國內動植及農業生產環境！<span>找到違規品一項加5分！</span>
                        </div>
                        <div class="game_round_start_btn" id="round02_start_btn">開始遊戲</div>
                    </div>
                </div>
                <div class="next_box img_100" id="next_box_01">
                    <img src="./images/next_box_hover.png" alt="next_box">
                    <img src="./images/next_box.png" alt="next_box">
                </div>
                <div class="next_box img_100" id="next_box_02">
                    <img src="./images/next_box_hover.png" alt="next_box">
                    <img src="./images/next_box.png" alt="next_box">
                </div>
                <div class="next_box img_100 next_box_last" id="next_box_03">
                    <img src="./images/finish_btn_hover.png" alt="finish_btn_hover">
                    <img src="./images/finish_btn.png" alt="finish_btn">
                </div>
                <div id="more_all">
                    <div class="more">
                        <div class="more_txt">想了解更多</div>
                        <div class="img_100" id="more_btn"><img src="./images/more_icon.png" alt="more_icon"></div>
                    </div>
                    <a href="https://www.baphiq.gov.tw/ws.php?id=20603" id="not_goods" target="_blank">哪些動植物產品不能輸入</a>
                </div>
                <div id="error_popup" class=""></div>
                <div class="add_5 img_100" id="add_03"><img src="./images/plus_five.png" alt="plus_five"></div>
            </div>
            <div id="game_round3" class="fade_in">
                <div class="img_100" id="left_ip_3"><img src="./images/people_dog_2.png" alt="people_dog_1"></div>
                <div class="round3_qa" id="round3_q1">
                    <div class="round3_qa_content">
                        <div class="img_100 round3_ques_img"><img src="./images/question.png" alt=""></div>
                        <div>
                            <div class="round3_ques_txt">
                                什麼樣的管道有可能買到境外動植物產品？
                            </div>
                            <div class="round3_ans_txt_all">
                                <div class="round3_ans_option round3_wrong">A. 臉書社團</div>
                                <div class="round3_ans_option round3_wrong">B. 一頁式網站</div>
                            </div>
                            <div class="round3_ans_txt_all">
                                <div class="round3_ans_option round3_wrong">C. 網購平台</div>
                                <div class="round3_ans_option round3_answer">D. 以上皆是</div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="round3_qa fade_in_round3" id="round3_q2">
                    <div class="round3_qa_content">
                        <div class="img_100 round3_ques_img"><img src="./images/question.png" alt=""></div>
                        <div>
                            <div class="round3_ques_txt">
                                若擅自輸入違法動植物產品，最高會被處多少罰金？
                            </div>
                            <div class="round3_ans_txt_all">
                                <div class="round3_ans_option round3_wrong">A. 3萬元</div>
                                <div class="round3_ans_option round3_wrong">B. 30萬元</div>
                            </div>
                            <div class="round3_ans_txt_all">
                                <div class="round3_ans_option round3_answer">C. 300萬元</div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="game_round_dialogbox" id="round03_dialogbox">
                    <div class="game_round_dialogbox_all">
                        <div class="game_round_title">檢疫員出題考考你！</div>
                        <div class="game_round_txt game_round3_txt">
                            問答題請選出正確答案，離成為動植物檢疫守門員不遠了！<span>答對一題加10分！</span>
                        </div>
                        <div class="game_round_start_btn" id="round03_start_btn">開始遊戲</div>
                    </div>
                </div>
                <div id="round3_error_popup">
                    <div id="round3_error_a_img" class="img_100"><img src="./images/answer.png" alt="answer"></div>
                    <div id="round3_correct">
                        <div id="round3_correct_txt"></div>
                    </div>
                    <div class="confirm_btn" id="round3_error_btn">確定</div>
                </div>
                <div class="add_5 img_100" id="add_04"><img src="./images/plus_ten.png" alt="plus_ten"></div>
            </div>
            <div id="game_end" class="fade_in">
                <div id="game_form">
                    <!-- 參加抽獎表單 -->
                    <div id="game_form_content">
                        <div id="game_form_title"></div>
                        <form action="" method="post" id="form">
                            <div class="form_row">
                                <label class="game_label" for="name">姓名：</label>
                                <input class="game_input" type="text" name="name" id="name" minlength="2" maxlength="20"
                                    placeholder="請輸入姓名" required />
                                <div class="exclamation_word" id="exclamation_mark1">
                                    請輸入中英文姓名
                                </div>
                            </div>
                            <div class="form_row">
                                <label class="game_label" for="phone">電話：</label>
                                <input class="game_input" type="tel" name="phone" id="tel" minlength="10" maxlength="10"
                                    placeholder="請輸入手機號碼" pattern="[0]{1}[9]{1}[0-9]{8}" required />
                                <div class="exclamation_word" id="exclamation_mark2">
                                    請輸入正確手機號碼
                                </div>
                            </div>
                            <div class="form_row">
                                <label class="game_label" for="email">Email：</label>
                                <input class="game_input" type="email" name="email" id="email" placeholder="請輸入電子信箱"
                                    required />
                                <div class="exclamation_word" id="exclamation_mark3">
                                    請輸入正確信箱
                                </div>
                            </div>
                            <div class="form_all_btn">
                                <div class="img_100 form_submit_btn" id="gameFormSubmit">
                                    <img src="./images/send_btn_hover.png" alt="send_btn_hover">
                                    <img src="./images/send_btn.png" alt="send_btn">
                                </div>
                                <div class="img_100 form_repeat_btn" id="gameFormRepeat">
                                    <img src="./images/again_btn_hover.png" alt="again_btn_hover">
                                    <img src="./images/again_btn.png" alt="again_btn">
                                </div>
                            </div>
                        </form>
                    </div>
                    <div class="img_100" id="game_form_ip">
                        <img src="./images/people_dog_3.png" alt="people_dog_3">
                    </div>
                </div>
                <div id="game_fail">
                    <!-- 遊戲失敗 -->
                    <div id="game_fail_title"></div>
                    <div class="img_100 form_repeat_btn" id="gameFormRepeat2">
                        <img src="./images/again_btn_hover.png" alt="again_btn_hover">
                        <img src="./images/again_btn.png" alt="again_btn">
                    </div>
                    <div class="img_100" id="game_fail_ip">
                        <img src="./images/people_dog_4.png" alt="people_dog_4">
                    </div>
                </div>
            </div>
            <div class="game_completed" id="gameFormDone">
                <div class="game_completed_block">
                    <div class="game_completed_text">填單完成</div>
                    <div class="confirm_btn" id="game_completed_btn">確定</div>
                </div>
            </div>
            <div class="game_times_up_bg" id="gameTimesUp">
                <div class="game_completed game_times_up">
                    <div class="game_completed_block">
                        <div class="game_completed_text game_times_up_text">時間到！</div>
                    </div>
                </div>
            </div>
        </div>
    </main>
    <footer>
        <div class="footer_all">
            <div class="footer_icon pc_img">
                <img src="./images/logo_2.png" alt="" />
            </div>
            <div class="footer_text pc_img">
                行政院農業委員會 動植物防疫檢疫局 版權所有©Copyright 2023
            </div>
            <div class="mb_img">
                <div class="footer_icon">
                    <img src="./images/logo_2_mb.png" alt="" />
                </div>
                <div class="footer_text">
                    行政院農業委員會 動植物防疫檢疫局<br>版權所有©Copyright 2023
                </div>
            </div>
        </div>
    </footer>
    <script>
        const game1Start = lottie.loadAnimation({
            container: game1_start,
            animType: "svg",
            loop: false,
            autoplay: false,
            path: "./images/Q1_start/game1_start.json",
        });
        const game1End = lottie.loadAnimation({
            container: game1_end,
            animType: "svg",
            loop: false,
            autoplay: false,
            path: "./images/Q1_end/game1_end.json",
        });
        const game2Start = lottie.loadAnimation({
            container: game2_start,
            animType: "svg",
            loop: false,
            autoplay: false,
            path: "./images/Q2_start/game2_start.json",
        });
        const game2End = lottie.loadAnimation({
            container: game2_end,
            animType: "svg",
            loop: false,
            autoplay: false,
            path: "./images/Q2_end/game2_end.json",
        });
        let timerCount = 10;
        let score = 1000;
        const scoreNum = document.getElementById("score_num");
        const countNum = document.getElementById("count_num");
        let gameRound1Pack1Success = false;
        let timerRound1Pack1, timerRound1Pack2;
        let game_round1 = document.getElementById("game_round1");
        let game_round2 = document.getElementById("game_round2");
        let game_round3 = document.getElementById("game_round3");
        let gameTimesUp = document.getElementById("gameTimesUp");
        let pack_all = document.getElementById("pack_all");
        let pack_all_02 = document.getElementById("pack_all_02");
        let dog02 = document.getElementById("dog02");
        let dog03 = document.getElementById("dog03");
        let game_1_start = document.getElementById("game1_start");
        let game_1_end = document.getElementById("game1_end");
        let game_2_start = document.getElementById("game2_start");
        let round02_dialogbox = document.getElementById("round02_dialogbox");
        let round03_dialogbox = document.getElementById("round03_dialogbox");
        let add_01 = document.getElementById("add_01");
        let add_02 = document.getElementById("add_02");
        let add_03 = document.getElementById("add_03");
        let add_04 = document.getElementById("add_04");
        let box_1_2 = document.getElementById("box_1_2");
        let box_2_3 = document.getElementById("box_2_3");
        let mistake_left01 = document.getElementById("mistake_left01");
        let mistake_right01 = document.getElementById("mistake_right01");
        let mistake_left02 = document.getElementById("mistake_left02");
        let mistake_right02 = document.getElementById("mistake_right02");
        let success01 = document.getElementById("success01");
        let success02 = document.getElementById("success02");
        let error_popup = document.getElementById("error_popup");
        let next_box_01 = document.getElementById("next_box_01");
        let round2_q1 = document.getElementById("round2_q1");
        let round2_q2 = document.getElementById("round2_q2");
        let next_box_02 = document.getElementById("next_box_02");
        let next_box_03 = document.getElementById("next_box_03");
        let round3_q1 = document.getElementById("round3_q1");
        let round3_q2 = document.getElementById("round3_q2");
        let round3_correct_txt = document.getElementById("round3_correct_txt");
        let round3_error_popup = document.getElementById("round3_error_popup");


        document.getElementById("startbtn").addEventListener("click", () => {
            document.getElementById("game_start").style.display = "none";
            document.getElementById("score").style.display = "block";
            document.getElementById("count").style.display = "block";
            game_round1.style.display = "block";
        });

        function TimesUp() {
            gameTimesUp.style.display = "flex";
            setTimeout(() => {
                gameTimesUp.classList.add("fade_out");
                setTimeout(() => {
                    gameTimesUp.style.display = "none";
                    gameTimesUp.classList.remove("fade_out");
                }, 800);
            }, 1800);
        }
        document.getElementById("round01_start_btn").addEventListener("click", () => {
            game1_start.style.display = "block";
            document.getElementById("round01_dialogbox").style.display = "none";
            document.getElementById("dog01").style.display = "none";
            game1Start.play();
            setTimeout(() => {
                game1Start.stop();
                pack_all.style.display = "flex";
                game1_start.style.display = "none";
                dog02.style.display = "block";
                timerRound1Pack1 = setInterval(() => {
                    timerCount -= 1;
                    countNum.innerText = timerCount;
                    if (timerCount === 5 && !gameRound1Pack1Success) {
                        clearInterval(timerRound1Pack1);
                        TimesUp();
                        setTimeout(() => {
                            gameRound1Pack1();
                        }, 800);
                    }
                }, 1000);
            }, 4150);
        });
        function gameRound1Pack1() {
            game1_end.style.display = "block";
            dog02.style.display = "none";
            gameRound1Pack1Success = true;
            setTimeout(() => {
                pack_all.style.display = "none";
                game1End.play();
                setTimeout(() => {
                    game1End.stop();
                    game1_end.style.display = "none";
                    game_2_start.style.display = "block";
                    game2Start.play();
                    setTimeout(() => {
                        game2Start.stop();
                        pack_all_02.style.display = "flex";
                        dog03.style.display = "block";
                        game_2_start.style.display = "none";
                        timerRound1Pack2 = setInterval(() => {
                            timerCount -= 1;
                            countNum.innerText = timerCount;
                            if (timerCount === 0) {
                                TimesUp();
                                setTimeout(() => {
                                    game_round1.classList.add("fade_out");
                                    setTimeout(() => {
                                        game_round1.style.display = "none";
                                        game_round2.style.display = "block";
                                        round02_dialogbox.style.display = "flex";
                                        timerCount = 30;
                                        countNum.innerText = 30;
                                    }, 800);
                                }, 1800);
                                clearInterval(timerRound1Pack2);
                            }
                        }, 1000);
                    }, 5000);
                }, 2000);
            }, 1500);
        }
        function gameRound1Pack2() {
            dog03.style.display = "none";
            game1_start.style.display = "none";
            setTimeout(() => {
                add_02.style.display = "none";
            }, 1000);
            setTimeout(() => {
                pack_all_02.style.display = "none";
                game2End.play();
            }, 1500);
            setTimeout(() => {
                // game2End.stop();
                game_round1.classList.add("fade_out");
                setTimeout(() => {
                    game_round1.style.display = "none";
                    game_round2.style.display = "block";
                    round02_dialogbox.style.display = "flex";
                    timerCount = 30;
                    countNum.innerText = 30;
                }, 800);
            }, 4500);
        }
        function addScore(number) {
            score += number;
            scoreNum.innerText = score.toString().substr(1, 3);
            add_03.style.display = 'block';
            setTimeout(() => {
                add_03.style.display = "none";
            }, 1000);
        }
        document.getElementById("box_1_1").addEventListener("click", () => {
            mistake_left01.style.display = "block";
            setTimeout(() => {
                mistake_left01.style.display = "none";
            }, 300);
        });
        document.getElementById("box_1_3").addEventListener("click", () => {
            mistake_right01.style.display = "block";
            setTimeout(() => {
                mistake_right01.style.display = "none";
            }, 300);
        });
        box_1_2.addEventListener("click", () => {
            box_1_2.style.pointerEvents = "none";
            add_01.style.display = "block";
            success01.style.display = "block";
            setTimeout(() => {
                success01.style.display = "none";
            }, 300);
            addScore(5)
            setTimeout(() => {
                add_01.style.display = "none";
            }, 1000);
            clearInterval(timerRound1Pack1);
            gameRound1Pack1();
        });
        document.getElementById("box_2_1").addEventListener("click", () => {
            mistake_right02.style.display = "block";
            setTimeout(() => {
                mistake_right02.style.display = "none";
            }, 300);
        });
        document.getElementById("box_2_2").addEventListener("click", () => {
            mistake_left02.style.display = "block";
            setTimeout(() => {
                mistake_left02.style.display = "none";
            }, 300);
        });
        box_2_3.addEventListener("click", () => {
            box_2_3.style.pointerEvents = "none";
            add_02.style.display = "block";
            success02.style.display = "block";
            setTimeout(() => {
                success02.style.display = "none";
            }, 300);
            clearInterval(timerRound1Pack2);
            addScore(5);
            setTimeout(() => {
                add_02.style.display = "none";
            }, 1000);
            document.getElementById("game2_end").style.display = "block";
            gameRound1Pack2();
        });

        const round2Answer = document.querySelectorAll('.round2_answer');
        const round2Wrong = document.querySelectorAll('.round2_wrong');
        let timerRound2;
        let timerRound2Box = 10;
        let round2State = 1;

        round2Wrong.forEach((item) => {
            item.addEventListener('click', () => {
                error_popup.style.display = 'block';
                error_popup.classList.add('fadein_out');
                setTimeout(() => {
                    error_popup.style.display = 'none';
                    error_popup.classList.remove('fadein_out');
                }, 1800)
            })
        })
        function round2Timer() {
            timerCount -= 1;
            timerRound2Box -= 1;
            if (timerCount === 20 && round2State === 1) {
                TimesUp();
                clearInterval(timerRound2);
                setTimeout(() => {
                    timerRound2 = setInterval(round2Timer, 1000);
                }, 2000)
                document.getElementById(`next_box_01`).click();

            } else if (timerCount === 10 && round2State === 2) {
                TimesUp();
                clearInterval(timerRound2);
                setTimeout(() => {
                    timerRound2 = setInterval(round2Timer, 1000);
                }, 2000)
                document.getElementById(`next_box_02`).click();
            }

            if (timerCount === 0) {
                TimesUp();
                document.getElementById(`next_box_03`).click();
                clearInterval(timerRound2);
            }
            countNum.innerText = timerCount;
        }
        function GID(id) {
            return document.getElementById(id);
        }
        let round2Box1Count = 0;
        let round2Box2Count = 0;
        let round2Box3Count = 0;
        function round2AnswerRight(item) {
            addScore(5);
            item.style.display = 'none';
            if (round2State === 1) {
                round2Box1Count += 1
                if (round2Box1Count === 2) {
                    document.getElementById(`next_box_01`).click();
                }
            } else if (round2State === 2) {
                round2Box2Count += 1
                if (round2Box2Count === 3) {
                    document.getElementById(`next_box_02`).click();
                }
            } else if (round2State === 3) {
                round2Box3Count += 1
                if (round2Box3Count === 3) {
                    document.getElementById(`next_box_03`).click();
                }
            }
        }
        round2Answer.forEach((item) => {
            item.addEventListener('click', () => { round2AnswerRight(item) })
        })
        document.getElementById('round02_start_btn').addEventListener('click', () => {
            round02_dialogbox.style.display = 'none';
            round2_q1.style.display = 'block';
            next_box_01.style.display = 'block';
            timerRound2 = setInterval(round2Timer, 1000);
        });
        next_box_01.addEventListener('click', () => {
            round2_q1.classList.add('fade_out_round2');
            timerRound2Box = 10;
            round2State = 2
            setTimeout(() => {
                round2_q1.style.display = 'none';
                round2_q2.style.display = 'block';
                next_box_01.style.display = 'none';
                next_box_02.style.display = 'block';
            }, 800);
        });
        next_box_02.addEventListener('click', () => {
            round2_q2.classList.add('fade_out_round2');
            round2State = 3
            timerRound2Box = 10;
            setTimeout(() => {
                round2_q2.style.display = 'none';
                document.getElementById('round2_q3').style.display = 'block';
                next_box_02.style.display = 'none';
                next_box_03.style.display = 'block';
            }, 800);
        });

        let timerRound3;
        function timerRound3Function() {
            timerCount -= 1;
            countNum.innerText = timerCount;
            if (timerCount === 0) {
                clearInterval(timerRound3)
                Round3End();
            }
        }
        next_box_03.addEventListener('click', () => {
            setTimeout(() => {
                game_round2.classList.add('fade_out');
                setTimeout(() => {
                    game_round2.style.display = 'none';
                    game_round3.style.display = 'block';
                    round03_dialogbox.style.display = 'flex';
                    clearInterval(timerRound2)
                    timerCount = 15;
                    countNum.innerText = timerCount;
                }, 800);
            }, 1800);
        });

        document.getElementById('round03_start_btn').addEventListener('click', () => {
            round03_dialogbox.style.display = 'none';
            round3_q1.style.display = 'block';
            timerCount = 15;
            timerRound3 = setInterval(timerRound3Function, 1000);
        });
        const round3Answer = document.querySelectorAll('.round3_answer')
        const round3Wrong = document.querySelectorAll('.round3_wrong');
        const round3ErrorBtn = document.getElementById('round3_error_btn');
        let round3QCount = 1;

        round3Answer.forEach((item) => {
            item.addEventListener('click', () => {
                add_04.style.display = 'block';
                setTimeout(() => {
                    add_04.style.display = "none";
                    round3_q1.classList.add('fade_out_round3');
                }, 1000);
                addScore(10);
                switch (round3QCount) {
                    case 1:
                        item.style.pointerEvents = "none";
                        setTimeout(() => {
                            round3_q1.style.display = "none";
                            round3_q2.style.display = "block";
                        }, 1800);
                        round3QCount += 1;
                        break
                    case 2:
                        item.style.pointerEvents = "none";
                        Round3End();
                        break
                }
            })
        });
        round3Wrong.forEach((item) => {
            item.addEventListener('click', () => {
                clearInterval(timerRound3);
                switch (round3QCount) {
                    case 1:
                        round3_correct_txt.innerText = "在臉書社團、一頁式網站管道、網購平台皆有可能買到境外動植物產品！";
                        break
                    case 2:
                        item.style.pointerEvents = "none";
                        round3_correct_txt.innerText = "擅自輸入違法動植物產品，最高罰金300萬元";
                        break
                }
                round3_error_popup.style.display = "block";
            })
        });

        round3ErrorBtn.addEventListener('click', () => {
            timerRound3 = setInterval(timerRound3Function, 1000);
            round3_error_popup.style.display = "none";
            round3_q1.classList.add('fade_out_round3');
            switch (round3QCount) {
                case 1:
                    round3QCount += 1;
                    setTimeout(() => {
                        round3_q1.style.display = "none";
                        round3_q2.style.display = "block";
                    }, 800);

                    break
                case 2:
                    Round3End();
                    break
            }
        })
        function Round3End() {
            game_round3.classList.add('fade_out_round3');
            count.style.display = 'none';
            setTimeout(() => {
                game_round3.style.display = 'none';
                document.getElementById('game_end').style.display = 'block';
            }, 800);
            let FinalScoreNum = score - 1000;
            if (FinalScoreNum < 35) {
                document.getElementById('game_fail').style.display = 'block';
            } else {
                document.getElementById('game_form').style.display = 'block';
            }
        }
        let form_repeat_btn = document.querySelectorAll('.form_repeat_btn');
        form_repeat_btn.forEach((item) => {
            item.addEventListener('click', () => {
                window.location.reload();
            })
        });
        document.getElementById('game_completed_btn').addEventListener('click', () => {
            window.location.reload();
        })
    </script>
    <!-- =================  串接資料庫 ================= -->
    <script>
        const gameFormSubmit = document.getElementById("gameFormSubmit");
        gameFormSubmit.addEventListener("click", function () {
            checkForm();
        });
        function checkForm() {
            let is_error = false;
            $("#name").val($("#name").val().replace(/'- /g, ""));
            $("#tel").val($("#tel").val().replace(/'- /g, ""));
            $("#email").val($("#email").val().replace(/'- /g, ""));

            if (
                $("#name").val() == "" ||
                $("#name").val().length < 2 ||
                !$("#name")
                    .val()
                    .match(/^[\p{L}a-zA-Z\u4E00-\u9FFF]+$/)
            ) {
                // $("#name").addClass("input_bg_color");
                $("#exclamation_mark1").css("display", "block");
                is_error = true;
            } else {
                // $("#name").removeClass("input_bg_color");
                $("#exclamation_mark1").css("display", "none");
            }
            if (
                $("#tel").val() == "" ||
                $("#tel").val().length > 10 ||
                $("#tel").val().length < 10 ||
                !$("#tel")
                    .val()
                    .match(/^09\d{8}/)
            ) {
                // $("#tel").addClass("input_bg_color");
                $("#exclamation_mark2").css("display", "block");
                is_error = true;
            } else {
                // $("#tel").removeClass("input_bg_color");
                $("#exclamation_mark2").css("display", "none");
            }
            if (
                $("#email").val() == "" ||
                !$("#email")
                    .val()
                    .match(
                        /^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,8})$/
                    )
            ) {
                // $("#email").addClass("input_bg_color");
                $("#exclamation_mark3").css("display", "block");
                is_error = true;
            } else {
                // $("#email").removeClass("input_bg_color");
                $("#exclamation_mark3").css("display", "none");
            }
            if (!is_error) {
                let name = $("#name").val(),
                    tel = $("#tel").val(),
                    email = $("#email").val();
                $("#gameFormSubmit").off("click");
                $.ajax({
                    type: "POST",
                    async: false,
                    dataType: "jsonp",
                    url: "https://www.sales-frontier.com/adform/baphiq2023event/action1.php",
                    data: {
                        name: name,
                        email: email,
                        tel: tel,
                    },
                    jsonp: "mycallback",
                    jsonpCallback: "result",
                    success: function (data) {
                        // console.log(data);
                        var result = data;
                        if (result.success == true) {
                            // console.log($("#gameForm"));
                            // alert('ddd')
                            // $("#game_form").css({
                            //     display: "none",
                            // });
                            // document.getElementById(
                            //     "gameForm"
                            // ).style.display = "none";
                            // console.log($("#gameForm"));
                            $("#gameFormDone").css({
                                display: "flex",
                            });
                            // $("#lott_try_again").css({
                            //     'display': 'flex'
                            // })
                        }
                    },
                    error: (err) => {
                        console.log(err);
                    },
                });
            } else {
                $("#gameFormSubmit").one("click", function () {
                    checkForm();
                });
            }
        }
    </script>

</body>

</html>